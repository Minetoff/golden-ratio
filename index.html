<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>О компании</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
        <div class="header-content">
          <div class="logo">
            <img src="images/logo.png" alt="Golden Ratio">
            <span class="company-name">Golden Ratio</span>
          </div>
          <nav class="desktop-nav">
            <ul>
              <li><a href="#main">Главная</a></li>
              <li><a href="#loyalty">Система лояльности</a></li>
              <li><a href="#contacts">Контакты</a></li>
            </ul>
          </nav>
          <div class="menu-button">
            <button id="menuToggle">
              <span></span>
            </button>
          </div>
        </div>
        <div class="mobile-nav">
          <ul>
            <li><a href="#main">Главная</a></li>
            <li><a href="#loyalty">Система лояльности</a></li>
            <li><a href="#contacts">Контакты</a></li>
          </ul>
        </div>
        <div class="header-line"></div>
      </header>
    <div id="main" class="about-section">
        <div class="about-content">
            <div class="text-content">
                <h1>О компании</h1>
                <div class="info-blocks">
                    <div class="info-block">
                        <div class="info-icon">
                            <img src="images/diamond_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.svg" alt="Искусство">
                        </div>
                        <div class="info-text">
                            <h2>Искусство и ремесло</h2>
                            <p>Каждое украшение — это произведение искусства, созданное с любовью и вниманием к деталям.</p>
                        </div>
                    </div>
                    <div class="info-block">
                        <div class="info-icon">
                            <img src="images/partner_exchange_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.svg" alt="Традиции">
                        </div>
                        <div class="info-text">
                            <h2>Традиции и инновации</h2>
                            <p>Сочетаем классические техники с современными технологиями для создания уникальных украшений.</p>
                        </div>
                    </div>
                    <div class="info-block">
                        <div class="info-icon">
                            <img src="images/quality.png" alt="Качество">
                        </div>
                        <div class="info-text">
                            <h2>Качество и надежность</h2>
                            <p>Наши изделия изготовлены из высококачественных и экологически чистых материалов.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="image-content">
                <div class="image-wrapper">
                    <img src="images/gallery.jpg" alt="Ювелирные украшения">
                </div>
            </div>
        </div>
    </div>
    <section id="loyalty" class="loyalty-system">
        <h2 class="loyalty-title">Система лояльности</h2>
        <div class="loyalty-cards">
            <div class="loyalty-card-wrapper">
                <div class="loyalty-card-status">
                    <h3>Серебряный статус</h3>
                    <p class="discount">5%</p>
                </div>
                <div class="loyalty-card-description">
                    <p class="condition"><span>✔</span> Присваивается при общей сумме покупок до 1.000.000₽</p>
                </div>
            </div>
            <div class="loyalty-card-wrapper">
                <div class="loyalty-card-status">
                    <h3>Золотой статус</h3>
                    <p class="discount">7%</p>
                </div>
                <div class="loyalty-card-description">
                    <p class="condition"><span>✔</span> Присваивается при общей сумме покупок от 1 до 25 млн ₽</p>
                </div>
            </div>
            <div class="loyalty-card-wrapper">
                <div class="loyalty-card-status">
                    <h3>Платиновый статус</h3>
                    <p class="discount">15%</p>
                </div>
                <div class="loyalty-card-description">
                    <p class="condition"><span>✔</span> Присваивается при общей сумме покупок от 25.000.000₽</p>
                </div>
            </div>
        </div>
    </section>
    <section class="form-section">
        <h3>Заполните анкету, чтобы получить серебряный статус</h3>
        <form id="loyalty-form" onsubmit="handleSubmit(event)">
          <div class="form-row">
            <label for="name">Как мы можем к вам обращаться?*</label>
            <input type="text" 
                   id="name" 
                   name="name" 
                   minlength="2"
                   required>
          </div>
          <div class="form-row">
            <label for="phone">Телефон*</label>
            <input type="tel" 
                   id="phone" 
                   name="phone" 
                   placeholder="+7" 
                   pattern="[\+]7[\s\-]?[(]?[0-9]{3}[)]?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}"
                   title="Формат: +7XXXXXXXXXX" 
                   required>
          </div>
          <div class="form-row date-input">
            <label for="birthdate">Дата рождения</label>
            <input type="date" 
                   id="birthdate" 
                   name="birthdate">
          </div>
          <div class="submit-btn-container">
            <button type="submit" class="submit-btn">Отправить</button>
            <p id="form-response" style="margin-top: 10px;"></p>
          </div>
        </form>
    </section>
    <section id="contacts" class="contacts-section">
        <h2>Контакты</h2>
        <div class="contacts-container">
          <div class="contact-item">
            <div class="contact-icon">
              <img src="images/telegram.svg" alt="Telegram">
            </div>
            <div class="contact-details">
              <a href="https://t.me/goldenratio2024" target="_blank"><p class="contact-platform">Telegram</p>
              Свяжитесь с нами в Telegram</a>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">
              <img src="images/whatsapp.svg" alt="WhatsApp">
            </div>
            <div class="contact-details">
              <a href="https://api.whatsapp.com/send?phone=79143388588" target="_blank"><p class="contact-platform">WhatsApp</p>
              Напишите нам в WhatsApp</a>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">
              <img src="images/instagram.svg" alt="Instagram">
            </div>
            <div class="contact-details">
              <a href="https://www.instagram.com/goldenratio_vl?igsh=MW0wamwzZ2x4a29ybg==" target="_blank"><p class="contact-platform">Instagram</p>
              Следите за нами в Instagram</a>
            </div>
          </div>
        </div>
    </section>
    <footer class="footer">
        <div class="footer-content">
          <div class="footer-logo">
            <img src="images/logo.png" alt="Golden Ratio">
          </div>
          <div class="footer-text">
            <p>Ювелирные украшения, созданные с душой и вниманием к деталям</p>
          </div>
        </div>
    </footer>
  </div>
  <script>
    document.getElementById('menuToggle').addEventListener('click', function() {
        document.querySelector('.mobile-nav').classList.toggle('active');
        this.classList.toggle('active');
    });
  
    // Закрытие меню при клике на ссылку
    document.querySelectorAll('.mobile-nav a').forEach(link => {
        link.addEventListener('click', function() {
            document.querySelector('.mobile-nav').classList.remove('active');
            document.getElementById('menuToggle').classList.remove('active');
        });
    });
  
    // Главная прокрутка
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
  
    async function handleSubmit(event) {
        event.preventDefault();
        
        const form = event.target;
        const formData = new FormData(form);
        
        // Проверяем корректность телефона
        const phone = formData.get('phone');
        const phoneRegex = /^\+7\s?\(?\d{3}\)?\s?\d{3}[-\s]?\d{2}[-\s]?\d{2}$/;
        if (!phoneRegex.test(phone)) {
            document.getElementById('form-response').textContent = 'Пожалуйста, введите корректный номер телефона';
            document.getElementById('form-response').style.color = 'red';
            return;
        }
        
        // Проверяем дату рождения
        const birthdate = new Date(formData.get('birthdate'));
        const today = new Date();
        if (birthdate > today) {
            document.getElementById('form-response').textContent = 'Дата рождения не может быть в будущем';
            document.getElementById('form-response').style.color = 'red';
            return;
        }
        
        // Форматируем данные для отправки
        const data = {
            name: formData.get('name'),
            phone: phone.replace(/[\s\(\)\-]/g, ''), // Очищаем телефон от форматирования
            birthdate: formData.get('birthdate'),
            timestamp: new Date().toISOString()
        };
        
        try {
            const response = await fetch('https://script.google.com/macros/s/AKfycbyTlAP17YVThO0_snt66FKYzKDymKDgGyB7qXOK6ifa0wtwLc59br4o0Dr3Elp-n7MF/exec', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });
            
            if (response.ok) {
                form.reset();
                document.getElementById('form-response').style.color = 'green';
                document.getElementById('form-response').textContent = 'Спасибо! Ваша заявка принята.';
                
                setTimeout(() => {
                    document.getElementById('form-response').textContent = '';
                }, 3000);
            } else {
                const errorData = await response.text();
                throw new Error('Network response was not ok: ' + errorData);
            }
            
        } catch (error) {
            console.error('Error:', error);
            document.getElementById('form-response').style.color = 'red';
            document.getElementById('form-response').textContent = 'Произошла ошибка. Пожалуйста, попробуйте позже.';
        }
    }
  
    // Обработчик маски телефона
    document.getElementById('phone').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length === 0) {
            e.target.value = '+7';
            return;
        }
        
        if (value[0] === '7') {
            value = value.substring(1);
        }
        
        let formattedValue = '+7';
        
        if (value.length > 0) {
            formattedValue += ' (' + value.substring(0, 3);
        }
        if (value.length > 3) {
            formattedValue += ') ' + value.substring(3, 6);
        }
        if (value.length > 6) {
            formattedValue += '-' + value.substring(6, 8);
        }
        if (value.length > 8) {
            formattedValue += '-' + value.substring(8, 10);
        }
        
        e.target.value = formattedValue;
    });
  
    // Наблюдатель за появлением элементов
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting && window.innerWidth <= 768) {
                entry.target.classList.add('info-block-visible');
            }
        });
    }, {
        threshold: 0.2 // Элемент считается видимым, когда показано 20% его высоты
    });
  
    // Наблюдаем за всеми info-block
    document.querySelectorAll('.info-block').forEach(block => {
        observer.observe(block);
    });
  </script>
</body>
</html>
